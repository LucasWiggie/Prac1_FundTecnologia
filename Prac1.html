<!DOCTYPE html>

<html>

<head>
    <h1> Practica 1 - Fundamentos de Tecnología de Videojuegos</h1>
</head>

<body>
    <script>

        // PIEZAS //
        // Clase Pieza generica
        class Pieza {
            constructor(nombre, codigo, fecha) {
                this.nombre = nombre;
                this.codigo = codigo;
                this.fecha = fecha;
            }

            get nombre() {
                return this.nombre;
            }

            get codigo() {
                return this.codigo;
            }

            get fecha() {
                return this.fecha;
            }

            set nombre(nuevoNombre) {
                this.nombre = nuevoNombre;
            }

            set codigo(nuevoCod) {
                this.codigo = nuevoCod;
            }

            set fecha(nuevaFecha) {
                this.fecha = nuevaFecha;
            }
        }

        // Clase Pieza electrica que hereda de la clase Pieza generica
        class PiezaElectr extends Pieza {
            constructor(nombre, codigo, fecha, potencia, voltaje) {
                this.potencia = potencia;
                this.voltaje = voltaje;
                super(nombre, codigo, fecha);
            }

            get potencia() {
                return this.potencia;
            }

            get voltaje() {
                return this.voltaje;
            }

            set potencia(nuevaPot) {
                this.potencia = nuevaPotencia;
            }

            set voltaje(nuevoVoltaje) {
                this.voltaje = nuevoVoltaje;
            }
        }

        // Clase Pieza mecanica que hereda de la clase Pieza generica
        class PiezaMec extends Pieza {
            constructor(nombre, codigo, fecha, material) {
                this.material = material;
                super(nombre, codigo, fecha);
            }

            get material() {
                return this.material;
            }

            set material(nuevoMat) {
                this.material = nuevoMat;
            }
        }

        // Array con los posibles nombres que puede adquirir una pieza electrica
        const nombPiezasElectr = ["Placa ABS", "Centralita encendido", "Bornes cableado", "Alternador", "Encendido"];
        // Array con los posibles nombres que puede adquirir una pieza electrica
        const nombPiezasMec = ["Larguero inferior", "Guardabarros", "Larguero superior", "Subchasis", "Puerta"];
        // Array con las posibles potencias
        const potencias = [1, 5, 10, 20];
        // Array con los posibles voltajes
        const voltajes = [3.3, 5, 12, 240];
        // Array con los posibles materiales
        var materiales = ["Acero", "Titanio", "Carbono"];

        // FABRICA //
        class Fabrica {
            fabricar(numPiezas) {
                if (numPiezas == 100) {
                    for (var i = 0; i < 100; i++) {

                    }
                } else if (numPiezas == 1000) {
                    for (var i = 0; i < 1000; i++) {

                    }
                }
            }
        }

        // FACTORIA //
        class Factoria {
            constructor() {
                this.numE = 0; // contador del numero de piezas electricas que va creando la factoria
                this.numM = 0; // contador del numero de piezas mecanicas que va creando la factoria
                this.contPiezas = 0; // contador del numero de piezas total que va creando la factoria
            }

            elegirTipoPieza() {
                // Generamos un número aleatorio del 1 al 100
                var n = Math.floor(Math.random() * 100 + 1);

                //Aplicamos las probabilidades de cada tipo de pieza
                // 30% electricas
                // 70% mecánicas
                // Si sale electrica, devolverá 0, si sale mecánica devolverá 1

                if (n <= 70) { // tiene una probabilidad del 70/100 de ser menor que 70 (intervalo [1, 70])
                    return 1;
                } else { // tiene una probabilidad del 30/100 de ser mayor que 70 (intervalo (70, 100])
                    return 0;
                }
            }

            elegirNombrePiezaElectr() {
                // Generamos un numero aleatorio en el rango del tamaño del array de nombres para piezas electricas y devolvemos el nombre que se encuentre en dicha posicion del array
                // De esta manera, obtendremos un nombre aleatorio para cada pieza que se genere
                var n = Math.floor(Math.random() * 5);
                return nombPiezasElectr[n];
            }

            elegirNombrePiezaMec() {
                // Generamos un numero aleatorio en el rango del tamaño del array de nombres para piezas mecanicas y devolvemos el nombre que se encuentre en dicha posicion del array
                // De esta manera, obtendremos un nombre aleatorio para cada pieza que se genere
                var n = Math.floor(Math.random() * 5);
                return nombPiezasMec[n];
            }

            generarCodigo() {
                // El array cod[] almacenará los 10 numeros del codigo de la pieza
                var cod = [];
                for (var i = 0; i < 10; i++) {
                    // Para cada posicion, generamos un numero aleatorio
                    var n = Math.floor(Math.random()*10)
                    cod[i] = n;
                }
                return cod;
            }

            elegirPotencia() {
                // Elegimos aleatoriamente la potencia de la pieza a generar utilizando el array que contiene todas las posibles potencias
                var i = Math.floor(Math.random() * 4);
                return potencias[i];
            }

            elegirVoltaje() {
                // Elegimos aleatoriamente el voltaje de la pieza a generar utilizando el array que contiene todos los posibles voltajes
                var i = math.florr(Math.random() * 4);
                return voltajes[i];
            }

            elegirMaterial() {
                // Elegimos aleatoriamente el material de la pieza a generar utilizando el array que contiene todos los posibles materiales
                var i = Math.floor(Math.random() * 3);
                return materiales[i];
            }

            generarPiezaElectr() {
                // Encapsulamos todo el proceso de creación de la pieza, incluyendo la generación de sus atributos, en este metodo, que devolvera la pieza ya creada
                var nombre = elegirNombrePiezaElectr();
                var cod = generarCodigo();
                cod[10] = "E";
                var fecha = new Date();
                var potencia = elegirPotencia();
                var voltaje = elegirVoltaje();

                var p = new PiezaElectr(nombre, cod, fecha, potencia, voltaje);
                return p;
            }

            generarPiezaMec() {
                // Encapsulamos todo el proceso de creación de la pieza, incluyendo la generación de sus atributos, en este metodo, que devolvera la pieza ya creada
                var nombre = elegirNombrePiezaMec();
                var cod = generarCodigo();
                cod[10] = "M";
                var fecha = new Date();
                var material = elegirMaterial();

                var p = new PiezaMec(nombre, cod, fecha, material);
                return p;
            }

            generarPieza() {
                // Elegimos el tipo de pieza a crear, utilizando el metodo que selecciona el tipo siguiendo los porcentajes
                var n = elegirTipoPieza();

                // 0 -> Pieza electrica
                // 1 -> Pieza mecanica
                if (n == 0) {
                    p = generarPiezaElectr(); // se genera la pieza
                    numE++; // la factoría apunta la pieza creada en el contador de piezas electricas
                } else if (n == 1) {
                    p = generarPiezaMec();
                    numM++; // la factoría apunta la pieza creada en el contador de piezas mecanicas
                }

                contPiezas++; // la factoría apunta la pieza creada en el contador total de piezas
                return p; // devolvemos la pieza creada
            }

        }

        // ESTACION DE TRATAMIENTO //
        class EstacionTrat {
            constructor() {
                this.numE = 0; // contador del numero de piezas electricas que va procesando la estacion
                this.numM = 0; // contador del numero de piezas mecanicas que va procesando la estacion
                this.contPiezas = 0; // contador del numero de piezas total que va procesando la estación
            }

            procesarPieza(p) {
                // Guardaos el array que contiene el codigo en una variable auxiliar
                var arrayAux = p.codigo;

                // Para saber si es pieza electrica o mecnaica, comprobamos la ultima posicion del array, que contiene la letra que diferencia si es electrica o mecanica
                if (arrayAux[10] == "E") { // es electrica
                    if(p.potencia == 1 || p.potencia == 5){
                        // Se barniza con barniz normal

                    } else {
                        // Se barniza con barniz especial

                    }
                } else if(arrayAux[10] == "M"){ // es mecanica
                    if((p.material).localeCompare("Acero") == 0){
                        // Se galvanizan
                    } else if ((p.material).localeCompare("Titanio") == 0){
                        // Se pulen
                    } else {
                        // Se pintan
                    }
                }
            }
        }

    </script>
</body>

</html>